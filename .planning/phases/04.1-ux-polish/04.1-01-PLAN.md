---
phase: 04.1-ux-polish
plan: 01
type: execute
depends_on: []
files_modified: [src/entrypoints/youtube.content/GifCreator.tsx, src/entrypoints/youtube.content/style.css]
---

<objective>
Improve GIF creator modal UX with better styling, inline filename input, time adjustment buttons, and draggable positioning.

Purpose: Address UAT feedback to make GIF creation faster and more user-friendly.
Output: Polished modal that doesn't block video viewing and has intuitive time controls.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/entrypoints/youtube.content/GifCreator.tsx
@src/entrypoints/youtube.content/style.css
@src/entrypoints/youtube.content/App.tsx

**Prior decisions:**
- Phase 03-01: MM:SS time input format
- Phase 04-01: Time-based filename default (yt-gif-0m10s-0m13s format)
- Phase 04-02: Red/white branding for icons

**Fixes in this plan:**
1. Remove GIF button margin-top (if any visual misalignment)
2. Red download button (currently green, should match branding)
3. Inline filename input in settings view (not separate step after encoding)
4. Time adjustment buttons (+10s, +1s, +1 frame, and minus variants)
5. Draggable modal without background darkening
</context>

<tasks>

<task type="auto">
  <name>Task 1: Styling fixes + inline filename + time adjustment buttons</name>
  <files>src/entrypoints/youtube.content/GifCreator.tsx, src/entrypoints/youtube.content/style.css</files>
  <action>
1. **Red download button**: In style.css, change `.gif-creator-btn-download` from green (#2e7d32) to red (#ff0000), hover to (#cc0000).

2. **Inline filename input**: In GifCreator.tsx:
   - Move filename state initialization to use default based on startTime/endTime (compute on change)
   - Add filename input field to the 'idle' state section, after the width selector
   - Remove the separate filename field from 'complete' state (keep preview info only)
   - Update default filename to include video title prefix if easily accessible, otherwise keep current pattern

3. **Time adjustment buttons**: In GifCreator.tsx:
   - Create a TimeInput component or inline buttons around time inputs
   - Add buttons: -10s, -1s, -1frame, +1frame, +1s, +10s
   - Frame duration = 1/fps (use selected fps value)
   - Buttons should update startTimeStr/endTimeStr state
   - Style buttons as small pill buttons matching YouTube aesthetic

4. **Button margin fix**: Check anchor element in index.tsx and :host styles - ensure no unwanted margin-top on the GIF button. The button should align with other YouTube toolbar buttons.

CSS additions needed:
- `.gif-creator-time-controls` - flex container for time input + buttons
- `.gif-creator-time-btn` - small adjustment button style
  </action>
  <verify>
- npm run build succeeds
- Load extension, open YouTube video
- Verify: Download button is red
- Verify: Filename input appears in settings (idle state)
- Verify: Time adjustment buttons work and update times correctly
- Verify: GIF button aligns properly with YouTube toolbar
  </verify>
  <done>
- Download button is red (#ff0000)
- Filename input in idle state (before encoding)
- Time buttons adjust start/end times by ±10s, ±1s, ±frame
- No visual misalignment on GIF button
  </done>
</task>

<task type="auto">
  <name>Task 2: Draggable modal without background darkening</name>
  <files>src/entrypoints/youtube.content/GifCreator.tsx, src/entrypoints/youtube.content/style.css</files>
  <action>
1. **Remove overlay darkening**: Change `.gif-creator-overlay` background from `rgba(0, 0, 0, 0.8)` to `transparent` or remove entirely. The modal should float over the page without dimming.

2. **Make modal draggable**: Add drag functionality to GifCreator.tsx:
   - Add state: `const [position, setPosition] = useState({ x: window.innerWidth / 2 - 200, y: 100 })`
   - Add state: `const [isDragging, setIsDragging] = useState(false)`
   - Add state: `const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 })`
   - On header mousedown: start drag, calculate offset from click to modal corner
   - On document mousemove (when dragging): update position
   - On document mouseup: stop drag
   - Apply position via inline style on modal: `style={{ left: position.x, top: position.y }}`
   - Change modal from centered (flexbox) to positioned (absolute/fixed)
   - Add `cursor: move` to header when not encoding

3. **Overlay changes**:
   - Keep overlay as click-outside-to-close target but make it transparent
   - Alternatively, remove overlay entirely and handle click-outside differently (check if click is outside modal bounds)
   - The overlay should NOT capture pointer events except for the modal itself

4. **CSS adjustments**:
   - Remove `align-items: center; justify-content: center;` from overlay
   - Add `position: fixed;` to modal with top/left from state
   - Add `.gif-creator-header { cursor: move; }` (but `cursor: default` when encoding)
   - Consider adding a subtle shadow to make modal stand out without darkening

5. **Persist position**: Optionally save position to localStorage so it remembers user preference across sessions.
  </action>
  <verify>
- npm run build succeeds
- Load extension, open YouTube video, click GIF button
- Verify: Modal appears without darkening the background
- Verify: Can drag modal by its header
- Verify: Modal position updates smoothly while dragging
- Verify: Can still interact with video controls behind/around modal
- Verify: Escape and X button still close modal
  </verify>
  <done>
- Modal is draggable by header
- No background darkening (video visible)
- Modal can be positioned anywhere on screen
- Click outside modal (on video) doesn't close it (or optional: does close it)
- Smooth drag experience without jank
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Extension loads in browser (Firefox or Chrome)
- [ ] All 5 UX fixes implemented and working:
  - [ ] Red download button
  - [ ] Inline filename in settings
  - [ ] Time adjustment buttons functional
  - [ ] Draggable modal
  - [ ] No background darkening
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Modal UX significantly improved per user feedback
</success_criteria>

<output>
After completion, create `.planning/phases/04.1-ux-polish/04.1-01-SUMMARY.md`
</output>
