---
phase: 04.1-ux-polish
plan: 01
subsystem: ui
tags: [react, draggable, ux]
requires:
  - phase: 04
    provides: GIF creator modal
provides:
  - Draggable modal
  - Time adjustment buttons
  - Red download button
  - Inline filename
affects: [04.1-02]
tech-stack:
  added: []
  patterns: [draggable-modal, time-adjustment-controls]
key-files:
  created: []
  modified: [src/entrypoints/youtube.content/GifCreator.tsx, src/entrypoints/youtube.content/style.css]
key-decisions:
  - Filename auto-updates when times change for consistency
  - Click outside modal no longer closes it (better for video interaction)
  - Escape key still closes modal for accessibility
patterns-established:
  - Draggable modal with mousedown/mousemove/mouseup pattern
  - Time adjustment buttons with frame-aware precision
issues-created: []
duration: 8min
completed: 2026-01-15
---

# Phase 4.1 Plan 01: Modal UX Summary

**Shipped draggable modal with time adjustment controls, inline filename editing, and red download button branding.**

## Performance
- **Duration:** 8 min
- **Started:** 2026-01-15
- **Completed:** 2026-01-15
- **Tasks:** 2
- **Files modified:** 2

## What Was Built

### Task 1: Styling fixes + inline filename + time adjustment buttons
- Changed download button from green (#2e7d32) to red (#ff0000) matching branding
- Added time adjustment buttons: -10s, -1s, -1f, +1f, +1s, +10s for both start and end times
- Frame duration calculated from selected FPS (1/fps seconds)
- Moved filename input from 'complete' state to 'idle' state for upfront editing
- Filename auto-updates when start/end times change

### Task 2: Draggable modal without background darkening
- Removed dark overlay (background: transparent, pointer-events: none)
- Modal now uses fixed positioning with draggable header
- Added position state, drag offset tracking, and mouse event handlers
- Header shows cursor: move when not encoding
- Enhanced modal shadow for visibility without overlay darkening
- Removed click-outside-to-close (overlay no longer captures events)

## Technical Details

### React State Added
```tsx
const [position, setPosition] = useState(() => ({
  x: window.innerWidth / 2 - 200,
  y: window.innerHeight / 2 - 250
}));
const [isDragging, setIsDragging] = useState(false);
const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });
```

### CSS Changes
- `.gif-creator-overlay`: transparent background, pointer-events: none
- `.gif-creator-modal`: position: fixed, enhanced shadow, border
- `.gif-creator-header-draggable`: cursor: move
- `.gif-creator-time-controls`: flex container for time buttons
- `.gif-creator-time-btn`: pill button styling for adjustment buttons

## Commits
1. `f656247` - feat(04.1-01): add time adjustment buttons, inline filename, and red download button
2. `71b8daa` - feat(04.1-01): make modal draggable without background darkening

## Verification
- [x] npm run build succeeds without errors
- [x] Red download button (#ff0000)
- [x] Inline filename in idle state
- [x] Time adjustment buttons functional
- [x] Draggable modal by header
- [x] No background darkening
