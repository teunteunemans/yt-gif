---
phase: 04-polish-ship
plan: 01
type: execute
depends_on: []
files_modified: [src/entrypoints/youtube.content/GifCreator.tsx, src/entrypoints/youtube.content/style.css]
---

<objective>
Add filename customization, improve download UX, and add keyboard shortcut for power users.

Purpose: Polish the GIF creation experience before store submission.
Output: Enhanced download flow with filename input and keyboard shortcut support.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-gif-creation/03-02-SUMMARY.md

**Tech stack available:** WXT, React 19, gifenc
**Established patterns:** React modal in Shadow DOM, encoding state machine

**Current state:** GifCreator.tsx already has working quality options (FPS, width), download button, and preview. This plan adds final polish.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add filename input with smart default</name>
  <files>src/entrypoints/youtube.content/GifCreator.tsx, src/entrypoints/youtube.content/style.css</files>
  <action>
Add a filename input field that appears in the "complete" state alongside the preview:
1. Add state: `const [filename, setFilename] = useState(() => generateDefaultFilename())`
2. Create helper: `generateDefaultFilename()` that returns `yt-gif-${MM}m${SS}s-${MM}m${SS}s` based on start/end times
3. Add input field between preview info and warning (if any)
4. Update `handleDownload` to use `filename.gif` instead of hardcoded timestamp
5. Style input to match existing form fields

Do NOT add validation - any filename is fine. Keep the .gif extension handling simple (append if missing).
  </action>
  <verify>Build passes: `pnpm build`</verify>
  <done>Filename input visible after encoding, default shows time range, download uses custom filename</done>
</task>

<task type="auto">
  <name>Task 2: Add Enter key shortcut for Create button</name>
  <files>src/entrypoints/youtube.content/GifCreator.tsx</files>
  <action>
Add keyboard handling so pressing Enter triggers "Create GIF" when in idle state:
1. In the existing `handleKeyDown` effect, add: `if (e.key === 'Enter' && encodingState === 'idle') { handleCreate(); }`
2. Ensure Enter doesn't fire if user is typing in an input (check activeElement)

Simple addition to existing keyboard handler. No new effects needed.
  </action>
  <verify>Build passes: `pnpm build`</verify>
  <done>Enter key triggers Create GIF from idle state, doesn't interfere with input typing</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm build` succeeds without errors
- [ ] `pnpm build:firefox` succeeds without errors
- [ ] No TypeScript errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Filename input works with sensible default
- Enter key shortcut works
</success_criteria>

<output>
After completion, create `.planning/phases/04-polish-ship/04-01-SUMMARY.md`
</output>
